{"ast":null,"code":"var _jsxFileName = \"/Users/jsy/Desktop/ai-travel-app/frontend/src/pages/MapView.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { MapContainer, TileLayer, Marker, useMapEvents } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// ä¿®å¤é»˜è®¤å›¾æ ‡ä¸æ˜¾ç¤ºçš„é—®é¢˜\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png'\n});\n\n// ðŸ“å¯é€‰ç‚¹ç»„ä»¶\nfunction LocationMarker({\n  onSelect\n}) {\n  _s();\n  const [position, setPosition] = useState(null);\n  useMapEvents({\n    click(e) {\n      const {\n        lat,\n        lng\n      } = e.latlng;\n      setPosition([lat, lng]);\n      onSelect([lat, lng]); // é€šçŸ¥çˆ¶ç»„ä»¶\n    }\n  });\n\n  // ç¤ºä¾‹ï¼šç‚¹å‡»åœ°å›¾åŽç”¨ OpenStreetMap API èŽ·å–åœ°å€\n  const handleMapClick = async e => {\n    const {\n      lat,\n      lng\n    } = e.latlng;\n    const response = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lng}&format=json`);\n    const data = await response.json();\n    const locationName = data.display_name || \"æœªçŸ¥åœ°ç‚¹\";\n    handleLocationSelected(locationName);\n  };\n  return position ? /*#__PURE__*/_jsxDEV(Marker, {\n    position: position\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 21\n  }, this) : null;\n}\n_s(LocationMarker, \"d+iGiIlX3PyrS97OlxTSSv84eug=\", false, function () {\n  return [useMapEvents];\n});\n_c = LocationMarker;\nexport default function MapView({\n  onLocationSelected\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: '400px',\n      width: '100%'\n    },\n    children: /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [30.25, 120.15],\n      zoom: 10,\n      scrollWheelZoom: true,\n      style: {\n        height: '100%',\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 OpenStreetMap\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LocationMarker, {\n        onSelect: onLocationSelected\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_c2 = MapView;\nvar _c, _c2;\n$RefreshReg$(_c, \"LocationMarker\");\n$RefreshReg$(_c2, \"MapView\");","map":{"version":3,"names":["React","useState","MapContainer","TileLayer","Marker","useMapEvents","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconUrl","iconRetinaUrl","shadowUrl","LocationMarker","onSelect","_s","position","setPosition","click","e","lat","lng","latlng","handleMapClick","response","fetch","data","json","locationName","display_name","handleLocationSelected","fileName","_jsxFileName","lineNumber","columnNumber","_c","MapView","onLocationSelected","style","height","width","children","center","zoom","scrollWheelZoom","attribution","url","_c2","$RefreshReg$"],"sources":["/Users/jsy/Desktop/ai-travel-app/frontend/src/pages/MapView.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { MapContainer, TileLayer, Marker, useMapEvents } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// ä¿®å¤é»˜è®¤å›¾æ ‡ä¸æ˜¾ç¤ºçš„é—®é¢˜\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n});\n\n// ðŸ“å¯é€‰ç‚¹ç»„ä»¶\nfunction LocationMarker({ onSelect }) {\n  const [position, setPosition] = useState(null);\n\n  useMapEvents({\n    click(e) {\n      const { lat, lng } = e.latlng;\n      setPosition([lat, lng]);\n      onSelect([lat, lng]); // é€šçŸ¥çˆ¶ç»„ä»¶\n    },\n  });\n\n  // ç¤ºä¾‹ï¼šç‚¹å‡»åœ°å›¾åŽç”¨ OpenStreetMap API èŽ·å–åœ°å€\n  const handleMapClick = async (e) => {\n    const { lat, lng } = e.latlng;\n    const response = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lng}&format=json`);\n    const data = await response.json();\n    const locationName = data.display_name || \"æœªçŸ¥åœ°ç‚¹\";\n    handleLocationSelected(locationName);\n  };\n  \n  return position ? <Marker position={position} /> : null;\n}\n\nexport default function MapView({ onLocationSelected }) {\n  return (\n    <div style={{ height: '400px', width: '100%' }}>\n      <MapContainer center={[30.25, 120.15]} zoom={10} scrollWheelZoom={true} style={{ height: '100%', width: '100%' }}>\n        <TileLayer\n          attribution='&copy; OpenStreetMap'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        <LocationMarker onSelect={onLocationSelected} />\n      </MapContainer>\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,YAAY,EAAEC,SAAS,EAAEC,MAAM,EAAEC,YAAY,QAAQ,eAAe;AAC7E,OAAO,0BAA0B;AACjC,OAAOC,CAAC,MAAM,SAAS;;AAEvB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,OAAOF,CAAC,CAACG,IAAI,CAACC,OAAO,CAACC,SAAS,CAACC,WAAW;AAC3CN,CAAC,CAACG,IAAI,CAACC,OAAO,CAACG,YAAY,CAAC;EAC1BC,OAAO,EAAE,6DAA6D;EACtEC,aAAa,EAAE,gEAAgE;EAC/EC,SAAS,EAAE;AACb,CAAC,CAAC;;AAEF;AACA,SAASC,cAAcA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACpC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGpB,QAAQ,CAAC,IAAI,CAAC;EAE9CI,YAAY,CAAC;IACXiB,KAAKA,CAACC,CAAC,EAAE;MACP,MAAM;QAAEC,GAAG;QAAEC;MAAI,CAAC,GAAGF,CAAC,CAACG,MAAM;MAC7BL,WAAW,CAAC,CAACG,GAAG,EAAEC,GAAG,CAAC,CAAC;MACvBP,QAAQ,CAAC,CAACM,GAAG,EAAEC,GAAG,CAAC,CAAC,CAAC,CAAC;IACxB;EACF,CAAC,CAAC;;EAEF;EACA,MAAME,cAAc,GAAG,MAAOJ,CAAC,IAAK;IAClC,MAAM;MAAEC,GAAG;MAAEC;IAAI,CAAC,GAAGF,CAAC,CAACG,MAAM;IAC7B,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAAC,mDAAmDL,GAAG,QAAQC,GAAG,cAAc,CAAC;IAC7G,MAAMK,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAClC,MAAMC,YAAY,GAAGF,IAAI,CAACG,YAAY,IAAI,MAAM;IAChDC,sBAAsB,CAACF,YAAY,CAAC;EACtC,CAAC;EAED,OAAOZ,QAAQ,gBAAGZ,OAAA,CAACJ,MAAM;IAACgB,QAAQ,EAAEA;EAAS;IAAAe,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC,GAAG,IAAI;AACzD;AAACnB,EAAA,CArBQF,cAAc;EAAA,QAGrBZ,YAAY;AAAA;AAAAkC,EAAA,GAHLtB,cAAc;AAuBvB,eAAe,SAASuB,OAAOA,CAAC;EAAEC;AAAmB,CAAC,EAAE;EACtD,oBACEjC,OAAA;IAAKkC,KAAK,EAAE;MAAEC,MAAM,EAAE,OAAO;MAAEC,KAAK,EAAE;IAAO,CAAE;IAAAC,QAAA,eAC7CrC,OAAA,CAACN,YAAY;MAAC4C,MAAM,EAAE,CAAC,KAAK,EAAE,MAAM,CAAE;MAACC,IAAI,EAAE,EAAG;MAACC,eAAe,EAAE,IAAK;MAACN,KAAK,EAAE;QAAEC,MAAM,EAAE,MAAM;QAAEC,KAAK,EAAE;MAAO,CAAE;MAAAC,QAAA,gBAC/GrC,OAAA,CAACL,SAAS;QACR8C,WAAW,EAAC,oBAAsB;QAClCC,GAAG,EAAC;MAAoD;QAAAf,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzD,CAAC,eACF9B,OAAA,CAACS,cAAc;QAACC,QAAQ,EAAEuB;MAAmB;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACZ,CAAC;AAEV;AAACa,GAAA,GAZuBX,OAAO;AAAA,IAAAD,EAAA,EAAAY,GAAA;AAAAC,YAAA,CAAAb,EAAA;AAAAa,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}